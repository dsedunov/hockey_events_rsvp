{"ast":null,"code":"import { MatDialogRef } from '@angular/material/dialog';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormBuilder } from '@angular/forms';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/core\";\nexport let FileNameDialogComponent = /*#__PURE__*/(() => {\n  class FileNameDialogComponent {\n    constructor(afs, formBuilder, dialogRef, guestFormBuilder, data, snackBar) {\n      this.afs = afs;\n      this.formBuilder = formBuilder;\n      this.dialogRef = dialogRef;\n      this.guestFormBuilder = guestFormBuilder;\n      this.data = data;\n      this.snackBar = snackBar;\n      this.guestForm = this.guestFormBuilder.group({\n        name: [''],\n        role: ['']\n      });\n    }\n    ngOnInit() {\n      this.changedEvent = JSON.parse(this.data.event);\n    }\n    addGuests() {\n      this.dialogRef.close();\n      if (this.guestForm.status === 'VALID') {\n        const newGuestData = this.guestForm.value;\n        this.changedEvent = {\n          ...this.changedEvent,\n          gameDay: this.changedEvent.gameDayISO,\n          players: [{\n            name: newGuestData.name,\n            surname: 'Гость',\n            role: newGuestData.role,\n            status: 'accept'\n          }, ...this.changedEvent.players.accept, ...this.changedEvent.players.reject]\n        };\n        delete this.changedEvent.gameDayISO;\n        this.afs.collection('events').doc(this.changedEvent.id).set(this.changedEvent).then(() => {\n          this.snackBar.open('Гость успешно добавлен', 'ok', {\n            duration: 10000\n          });\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    static #_ = this.ɵfac = function FileNameDialogComponent_Factory(t) {\n      return new (t || FileNameDialogComponent)(i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.MatDialogRef), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i4.MatSnackBar));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FileNameDialogComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 21,\n      vars: 1,\n      consts: [[3, \"formGroup\"], [\"mat-dialog-title\", \"\", 2, \"display\", \"flex\", \"align-content\", \"center\", \"justify-content\", \"center\"], [2, \"display\", \"block\", \"align-content\", \"center\", \"justify-content\", \"space-around\", \"margin\", \"auto\"], [\"appearance\", \"outline\"], [\"type\", \"text\", \"formControlName\", \"name\", \"matInput\", \"\", \"required\", \"\"], [\"formControlName\", \"role\", \"required\", \"\", \"placeholder\", \"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F\"], [\"value\", \"\\u0417\\u0430\\u0449\\u0438\\u0442\\u043D\\u0438\\u043A\"], [\"value\", \"\\u041D\\u0430\\u043F\\u0430\\u0434\\u0430\\u044E\\u0449\\u0438\\u0439\"], [\"value\", \"\\u0412\\u0440\\u0430\\u0442\\u0430\\u0440\\u044C\"], [2, \"display\", \"flex\", \"align-content\", \"center\", \"justify-content\", \"space-around\", \"margin\", \"0px\"], [\"mat-button\", \"\", \"type\", \"button\", 2, \"width\", \"45%\", \"margin\", \"0\", \"border\", \"#dc8ea4 1px solid\", \"border-radius\", \"4px\", \"font-weight\", \"200\", \"font-size\", \"16px\", 3, \"click\"], [\"mat-button\", \"\", \"type\", \"submit\", 2, \"width\", \"45%\", \"margin\", \"0\", \"background-color\", \"#E98AA4\", \"border-radius\", \"4px\", \"font-weight\", \"200\", \"font-size\", \"16px\", 3, \"click\"]],\n      template: function FileNameDialogComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"form\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0433\\u043E\\u0441\\u0442\\u044F\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"mat-dialog-content\", 2)(4, \"mat-form-field\", 3)(5, \"mat-label\");\n          i0.ɵɵtext(6, \"\\u0418\\u043C\\u044F\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(7, \"input\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"mat-form-field\", 3)(9, \"mat-select\", 5)(10, \"mat-option\", 6);\n          i0.ɵɵtext(11, \"\\u0417\\u0430\\u0449\\u0438\\u0442\\u043D\\u0438\\u043A\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"mat-option\", 7);\n          i0.ɵɵtext(13, \"\\u041D\\u0430\\u043F\\u0430\\u0434\\u0430\\u044E\\u0449\\u0438\\u0439\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"mat-option\", 8);\n          i0.ɵɵtext(15, \"\\u0412\\u0440\\u0430\\u0442\\u0430\\u0440\\u044C\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(16, \"mat-dialog-actions\", 9)(17, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function FileNameDialogComponent_Template_button_click_17_listener() {\n            return ctx.dialogRef.close();\n          });\n          i0.ɵɵtext(18, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"button\", 11);\n          i0.ɵɵlistener(\"click\", function FileNameDialogComponent_Template_button_click_19_listener() {\n            return ctx.addGuests();\n          });\n          i0.ɵɵtext(20, \"\\u041E\\u043A\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"formGroup\", ctx.guestForm);\n        }\n      },\n      dependencies: [i3.MatDialogTitle, i3.MatDialogActions, i3.MatDialogContent, i5.MatFormField, i5.MatLabel, i6.MatInput, i7.MatButton, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName, i8.MatSelect, i9.MatOption],\n      encapsulation: 2\n    });\n  }\n  return FileNameDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}