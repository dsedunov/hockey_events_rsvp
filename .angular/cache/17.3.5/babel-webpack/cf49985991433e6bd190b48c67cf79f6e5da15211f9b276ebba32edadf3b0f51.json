{"ast":null,"code":"var _a, _b;\nimport { __decorate, __metadata, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\nimport { FormBuilder } from '@angular/forms';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { AngularFirestore } from '@angular/fire/firestore';\nlet FileNameDialogComponent = class FileNameDialogComponent {\n  constructor(afs, formBuilder, dialogRef, guestFormBuilder, data, snackBar) {\n    this.afs = afs;\n    this.formBuilder = formBuilder;\n    this.dialogRef = dialogRef;\n    this.guestFormBuilder = guestFormBuilder;\n    this.data = data;\n    this.snackBar = snackBar;\n    this.guestForm = this.guestFormBuilder.group({\n      name: [''],\n      role: ['']\n    });\n  }\n  ngOnInit() {\n    this.changedEvent = JSON.parse(this.data.event);\n  }\n  addGuests() {\n    this.dialogRef.close();\n    if (this.guestForm.status === 'VALID') {\n      const newGuestData = this.guestForm.value;\n      this.changedEvent = {\n        ...this.changedEvent,\n        gameDay: this.changedEvent.gameDayISO,\n        players: [{\n          name: newGuestData.name,\n          surname: 'Гость',\n          role: newGuestData.role,\n          status: 'accept'\n        }, ...this.changedEvent.players.accept, ...this.changedEvent.players.reject]\n      };\n      delete this.changedEvent.gameDayISO;\n      this.afs.collection('events').doc(this.changedEvent.id).set(this.changedEvent).then(() => {\n        this.snackBar.open('Гость успешно добавлен', 'ok', {\n          duration: 10000\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};\nFileNameDialogComponent = __decorate([Component({\n  template: `\n    <form  [formGroup]=\"guestForm\" >\n      <h1 style=\"display: flex;\n      align-content: center;\n      justify-content: center;\" mat-dialog-title>Добавить гостя</h1>\n      <mat-dialog-content style=\"display: block;\n      align-content: center;\n      justify-content: space-around;\n      margin: auto;\">\n        <mat-form-field  appearance=\"outline\">\n        <mat-label>Имя</mat-label>\n          <input type='text' formControlName=\"name\" matInput required>\n        </mat-form-field>\n        <mat-form-field   appearance=\"outline\">\n        <mat-select formControlName=\"role\" required placeholder=\"Позиция\">\n        <mat-option value=\"Защитник\">Защитник</mat-option>\n        <mat-option value=\"Нападающий\">Нападающий</mat-option>\n        <mat-option value=\"Вратарь\">Вратарь</mat-option>\n      </mat-select>\n        </mat-form-field>\n      </mat-dialog-content>\n      <mat-dialog-actions style=\"display: flex;\n      align-content: center;\n      justify-content: space-around;\n      margin: 0px;\">\n        <button style=\"width: 45%;\n        margin: 0;\n        border: #dc8ea4 1px solid;\n        border-radius: 4px;\n        font-weight: 200;\n        font-size: 16px;\" mat-button type=\"button\" (click)=\"dialogRef.close()\">Отмена</button>\n        <button style=\"width: 45%;\n        margin: 0;\n        background-color: #E98AA4;\n        border-radius: 4px;\n        font-weight: 200;\n        font-size: 16px;\" mat-button type=\"submit\" (click)=\"addGuests()\">Ок</button>\n      </mat-dialog-actions>\n    </form>\n  `\n}), __param(4, Inject(MAT_DIALOG_DATA)), __metadata(\"design:paramtypes\", [typeof (_a = typeof AngularFirestore !== \"undefined\" && AngularFirestore) === \"function\" ? _a : Object, FormBuilder, typeof (_b = typeof MatDialogRef !== \"undefined\" && MatDialogRef) === \"function\" ? _b : Object, FormBuilder, Object, MatSnackBar])], FileNameDialogComponent);\nexport { FileNameDialogComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}